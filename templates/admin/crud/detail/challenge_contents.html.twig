{% set content_status_label = {
    'new': 'primary',
    'draft': 'info',
    'u_not_approved': 'success',
    'active': 'success',
    'archive': 'secondary',
    'deleted': 'dark',
    'blocked': 'danger',
} %}

{% if ea.crud.currentAction == 'detail' %}
    <table class="table datagrid ">
        <thead>
        <tr>
            <th>Image</th>
            <th>Uid (ID)</th>
            <th>User</th>
            <th>Status</th>
            <th>Views</th>
            <th>Votes</th>
            <th>Created at</th>
        </tr>
        </thead>
        {% for item in contents %}
            {% set content_url = ea_url().setController('App\\Controller\\Admin\\ContentCrudController').setAction('detail').setEntityId(item.id) %}
            {% set user_url = ea_url().setController('App\\Controller\\Admin\\UserCrudController').setAction('detail').setEntityId(item.user.id) %}
            {% set status_label = content_status_label[item.status] is defined ? content_status_label[item.status] : 'default' %}
            {% set html_id = 'ea-lightbox-' ~ item.uid ~ '-' ~ loop.index %}
            {% set image = item.getMediaPreviewUrl %}
            <tr>
                <td>
                    <a href="#" class="ea-lightbox-thumbnail" data-ea-lightbox-content-selector="#{{ html_id }}">
                        {% if 'http' in image %}
                            <img src="{{ image }}" class="img-fluid">
                        {% else %}
                            <img src="{{ api_project_domain }}{{ image }}" class="img-fluid">
                        {% endif %}
                    </a>

                    <div id="{{ html_id }}" class="ea-lightbox">
                        {% if 'http' in image %}
                            <img src="{{ image }}">
                        {% else %}
                            <img src="{{ api_project_domain }}{{ image }}">
                        {% endif %}
                    </div>
                </td>
                <td>
                    <a href="{{ content_url }}">{{ item.uid }}</a> ({{ item.id }})
                </td>
                <td>
                    <a href="{{ user_url }}">{{ item.user }}</a>
                </td>
                <td>
                    <span class="badge badge-{{ status_label }}">{{ item.status }}</span>
                </td>
                <td>
                    {{ item.viewedCount }}
                </td>
                <td>
                    {{ item.votesCount }}
                </td>
                <td>
                    {{ item.createdAtFormat }}
                </td>
            </tr>
        {% endfor %}
    </table>
{% else %}
    {{ field.formattedValue }}
{% endif %}